import rospy
import actionlib
from giftbot_action_server.msg import *
import numpy as np
from trajectory_msgs.msg import JointTrajectoryPoint

wps = np.zeros((10,12))
wps[0,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,-9.433983580109384e-06, -1.570015140892183, 0.00020204444625893103, -1.5705694895909812, 0.0002106347369460476, -9.722773326359402e-05]
wps[1,:]  = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,0.1633176366759521, -1.5600189530879482, 0.2168396535558358, -1.621612282371775, -0.1742658433075767, -8.654260453899447e-05]
wps[2,:]  = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,0.3266447073354843, -1.5500227652837135, 0.43347726266541264, -1.6726550751525684, -0.3487423213520994, -7.58574758143949e-05]
wps[3,:]  = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,0.48997177799501646, -1.540026577479479, 0.6501148717749895, -1.723697867933362, -0.5232187993966222, -6.517234708979535e-05]
wps[4,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,0.6532988486545487, -1.5300303896752443, 0.8667524808845664, -1.7747406607141558, -0.6976952774411449, -5.448721836519579e-05]
wps[5,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,0.8166259193140809, -1.5200342018710096, 1.0833900899941433, -1.8257834534949495, -0.8721717554856678, -4.380208964059622e-05]
wps[6,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,0.979952989973613, -1.5100380140667748, 1.30002769910372, -1.876826246275743, -1.0466482335301903, -3.3116960915996675e-05]
wps[7,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,1.1432800606331452, -1.5000418262625403, 1.516665308213297, -1.9278690390565367, -1.2211247115747133, -2.2431832191397108e-05]
wps[8,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,1.3066071312926775, -1.4900456384583056, 1.7333029173228738, -1.9789118318373302, -1.3956011896192357, -1.1746703466797555e-05]
wps[9,:] = [-5e-324, 1e-323, 5e-324, 2.1967674151942275e-22, 3.457799446190768e-23, -0.7849992794352644,1.4699342019522097, -1.480049450654071, 1.9499405264324507, -2.029954624618124, -1.5700776676637587, -1.061574742197989e-06]


def plan_robot():
    rospy.init_node('giftbot_client_py')
    client = actionlib.SimpleActionClient('JTS', giftbot_action_serverAction)
    print 'Waiting for the server'
    client.wait_for_server()
    goal = giftbot_action_serverGoal()
    #goal.goal_pose.joint_trajectory.points = [JointTrajectoryPoint(),]* wps.shape[0]
    print 'Planning'
    for i in range(wps.shape[0]):
        point = JointTrajectoryPoint()
        point.positions = wps[i,6:12]
        goal.goal_pose.joint_trajectory.points.append(point)
    #goal.goal_pose.joint_trajectory.points = points
    print 'Sending Goal'
    client.send_goal(goal)
    #client.wait_for_result()

if __name__=='__main__':
  plan_robot()
#  try:
#      plan_robot()
#  except rospy.ROSInterruptException:
#      pass